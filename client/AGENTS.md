# client

React + Vite frontend with TanStack Router & React Query, Tailwind CSS, Radix UI.

## Structure

```
src/
  routes/          # TanStack Router file-based routes
  components/ui/   # shadcn/Radix UI components
  lib/utils.ts     # cn() and helpers
  main.tsx         # app entry
  index.css        # Tailwind styles
```

## Conventions

- **Do NOT edit** `src/routeTree.gen.ts` — auto-generated by TanStack Router plugin.
- Routes go in `src/routes/`. File name = route path.
- **API Client**: Singleton in `lib/api-client.ts`, injected via router context. Access with `useRouteContext({ from: "__root__" })`.
- Import schemas/types via subpath: `from "shared/api/hello"`.
- Path alias: `@/*` → `./src/*`.
- Styling: Tailwind classes + `cn()` from `lib/utils.ts`.
- Only package that needs `build` (Vite bundles for production). Shared/server changes are available immediately.
- **Environment**: Requires `VITE_VIDOS_DEMO_BANK_SERVER_URL` (validated with Zod at startup).
- **Navigation**: Always use TanStack Router's `<Link>` and `useNavigate()` — never raw `<a href>` for internal routes. Required for basepath support.
- **Data fetching**: Use `useMutation` for API calls, `useQuery` with `refetchInterval` for polling. Avoid manual `useEffect` + `useState` patterns for async operations.
- **Auth flow state**: Use discriminated unions with `mode: "direct_post" | "dc_api"` for verification states. Mode lives in state, not external variable. Fields like `authorizeUrl` or `dcApiRequest` are required (not optional) based on mode discriminant.

## Design Language

Modern banking aesthetic with EU Digital Identity focus. Maintain consistency with these patterns:

### Typography

- **Fonts**: DM Sans (body), Space Mono (monospace/data)
- **Labels**: `text-xs uppercase tracking-wider text-muted-foreground font-mono`
- **Headings**: `text-2xl font-bold tracking-tight`

### Colors (defined in index.css)

- Primary: Indigo-tinted (`oklch(0.31 0.14 264)`)
- Backgrounds: Subtle gradients (`bg-gradient-to-br from-primary/90 to-primary`)
- Info boxes: `bg-primary/5 border border-primary/20`
- Error states: `bg-destructive/10 border border-destructive/20`

### Spacing & Borders

- Cards: `rounded-2xl border border-border/60`
- Buttons/inputs: `h-12` for large, `rounded-xl` or `rounded-lg`
- Page padding: `py-8 px-4 sm:px-6 lg:px-8`
- Max widths: `max-w-lg` (forms), `max-w-5xl` (landing)

### Components

- **Icon containers**: `h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center`
- **Status indicators**: `h-2 w-2 rounded-full bg-green-500 animate-pulse`
- **Trust badges**: Shield icon + `font-mono uppercase tracking-wider` text

### Animations (defined in index.css)

- `animate-slide-up`: Entry from below
- `animate-slide-in-right`: Entry from right
- `animate-fade-in`: Opacity transition
- Hover: `transition-transform group-hover:translate-x-1` on arrows

### Layout Patterns

- Progress rail: Sticky left (desktop), fixed top bar (mobile)
- Split panels: `grid lg:grid-cols-2 gap-12` for auth pages
- Form pages: Centered `max-w-lg mx-auto`
- Success pages: Centered icon + large amount display

## Deployment

Static build deployed to GitHub Pages via GitHub Actions.

```bash
bun run build  # outputs to dist/
```

Set `VITE_VIDOS_DEMO_BANK_SERVER_URL` to the deployed server URL at build time.
