# AGENTS.md

## Project

Bun + Turbo monorepo: `client/` (React/Vite), `server/` (Hono), `shared/` (Zod schemas/types).

## Commands (run from root)

```bash
bun install                        # install deps
bun run dev                        # all workspaces
bun run dev:client                 # client only
bun run dev:server                 # server only
bun run build                      # build all
bun run lint                       # biome lint .
bun run format                     # biome format . --write
bun run type-check                 # tsc across workspaces
bun run test                       # run tests
```

## Directory Structure

```
client/src/
  routes/        # TanStack Router route components
  lib/           # utilities
  main.tsx       # entry
server/src/
  index.ts       # Hono app + routes
  client.ts      # typed Hono client export
shared/src/
  api/           # Zod schemas per endpoint (no barrel files)
  types/         # shared types
```

Built output goes to `dist/` in each workspace (gitignored).

## Path Aliases

- `@server/*` → `./server/src/*`
- `@client/*` → `./client/src/*`
- `@shared/*` → `./shared/src/*`
- `@/*` → `./src/*` (inside client only)

Cross-workspace imports use package subpaths: `import { x } from "shared/api/hello"`, `import { y } from "server/client"`.

## Code Style

**Formatter**: Biome. Tabs, double quotes. Run `bun run format` before committing.

**Linting**: Biome recommended rules. Run `bun run lint`.

**TypeScript**: Strict mode (`strict: true`, `noUncheckedIndexedAccess`, `noFallthroughCasesInSwitch`). Target ESNext. Use `verbatimModuleSyntax`.

**Imports**: Named exports preferred. ES module syntax only. Biome auto-organizes imports.

**Naming**: PascalCase for components/types. camelCase for variables/functions. Zod schemas suffixed with `Schema` (e.g. `helloRequestSchema`).

**Validation**: Zod schemas in `shared/`, used by both client and server. Server uses `zValidator()` middleware from `@hono/zod-validator`. Responses validated with Zod before sending.

**Shared package**: No barrel files. One module per endpoint under `shared/src/api/`. Exports map in `package.json` — import via `"shared/api/hello"`, not `"shared/dist/..."`. Must rebuild shared (`bun run build --filter=shared`) for changes to be available to consumers.

**Error handling**: Server relies on Zod validation + Hono error handling. No global error boundary yet.

**Generated files**: Do NOT edit `client/src/routeTree.gen.ts` — auto-generated by TanStack Router.
